<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <script>
    
    const m =
      [ [ '1', '1', '1', '0', '1' ],
        [ '0', '0', '1', '0', '1' ],
        [ '1', '1', '1', '0', '1' ],
        [ '1', '0', '0', '0', '0' ],
        [ '1', '1', '1', '1', '1' ] ]

    let successors = (root, m) => {

      let connectedCells = [
        [root[0] - 1, root[1]],
        [root[0], root[1] - 1],
        [root[0] + 1, root[1]],
        [root[0], root[1] + 1]
      ]

      const validCells = connectedCells.filter((cell) => {
        return cell[0] >= 0 && cell[0] < m.length && cell[1] >= 0 && cell[1] < m[0].length
      })

      const successors = validCells.filter((cell) => {
        //return (m[cell[0]][cell[1]] !== m[root[0]][root[1]])
        return (m[cell[0]][cell[1]] !== '0')
      })
      
      return successors
    }

    const buildPath = (traversalTree, to) => {
      let path = [to]
      let parent = traversalTree[to]
      while (parent) {
        path.push(parent)
        parent = traversalTree[parent]
      }
      return path.reverse()
    }

    const bfs = (from, to) => {
      let traversalTree = []
      let visited = new Set
      let queue = []
      queue.push(from)

      while (queue.length) {
        let subtreeRoot = queue.shift()
        visited.add(subtreeRoot.toString())
        
        if (subtreeRoot.toString() === to.toString()) return buildPath(traversalTree, to)

        for (child of successors(subtreeRoot, m)) {
          if (!visited.has(child.toString())){
            traversalTree[child] = subtreeRoot
            queue.push(child)
          }
        }
      }
    }

    // const m =
    //   [ [ '1', '1', '1', '1', '1' ],
    //     [ '0', '0', '0', '0', '1' ],
    //     [ '0', '0', '0', '0', '1' ],
    //     [ '0', '0', '0', '0', '1' ],
    //     [ '0', '0', '0', '0', '1' ] ]

    // console.log(bfs([0,0], [4,4]).length) // => 9
    // console.log(bfs([0,0], [3,4]).length) // => 8
    // console.log(bfs([0,0], [2,4]).length) // => 7
    // console.log(bfs([0,0], [1,4]).length) // => 6
    // console.log(bfs([0,0], [0,4]).length) // => 5
    // console.log(bfs([0,0], [0,3]).length) // => 4
    // console.log(bfs([0,0], [0,2]).length) // => 3
    // console.log(bfs([0,0], [0,1]).length) // => 2
    // console.log(bfs([0,0], [0,0]).length) // => 1


    // const m =
    //   [ [ '1', '1', '1', '0', '1' ],
    //     [ '0', '0', '1', '0', '1' ],
    //     [ '1', '1', '1', '0', '1' ],
    //     [ '1', '0', '0', '0', '0' ],
    //     [ '1', '1', '1', '1', '1' ] ]

    console.log(bfs([0,0], [4,4]).length) // => 13
    console.log(bfs([0,0], [4,3]).length) // => 13
    //console.log(bfs([0,0], [3,4]).length) // => undefined
    console.log(bfs([4,0], [4,4]).length) // => 5
    </script>
  </body>
</html>